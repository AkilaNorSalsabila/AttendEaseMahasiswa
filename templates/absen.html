<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absensi Karyawan</title>

    <!-- Custom fonts -->
    <link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="/static/css/sb-admin-2.min.css" rel="stylesheet">
    <style>
        #video-container {
            display: none;
            margin-top: 20px;
        }
        iframe {
            width: 100%;
            max-width: 960px;
            height: 540px;
            border: 1px solid #ccc;
        }
        .alert {
            display: none;
        }
    </style>
</head>

<body id="page-top">

    <!-- Sidebar -->
    <div id="wrapper">
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/dashboard">
                <div class="sidebar-brand-icon rotate-n-15">
                    <i class="fas fa-laugh-wink"></i>
                </div>
                <div class="sidebar-brand-text mx-3">Karyawan Dashboard</div>
            </a>

            <hr class="sidebar-divider">

            <li class="nav-item">
                <a class="nav-link" href="/karyawan_dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/rekap_absensi_karyawan">
                    <i class="fas fa-list"></i>
                    <span>Rekap Absensi</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link logout" href="/logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>

        <!-- Content -->
        <head>
            <meta charset="UTF-8">
            <title>Data Absensi</title>
            <style>
                body {
                    font-family: Arial, sans-serif;
                }
                table {
                    width: 100%;
                    border-collapse: collapse;
                    margin-top: 20px;
                }
                table, th, td {
                    border: 1px solid black;
                }
                th, td {
                    padding: 8px;
                    text-align: center;
                }
                #searchInput {
                    width: 300px;
                    padding: 8px;
                    margin-bottom: 10px;
                }
            </style>
        </head>
        <body>
            <h1>Data Absensi</h1>
        
            <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Cari ID/Nama Karyawan...">
        
            <table id="absensiTable">
                <thead>
                    <tr>
                        <th>ID Karyawan</th>
                        <th>Nama Karyawan</th>
                        <th>Tanggal</th>
                        <th>Jam Masuk</th>
                        <th>Jam Pulang</th>
                        <th>Status</th>
                        <th>Bukti</th>
                    </tr>
                </thead>
                <tbody>
                    {% for absensi in absensi_list %}
                    <tr>
                        <td>{{ absensi.id_karyawan }}</td>
                        <td>{{ absensi.nama_karyawan }}</td>
                        <td>{{ absensi.tanggal }}</td>
                        <td>{{ absensi.jam_masuk }}</td>
                        <td>{{ absensi.jam_pulang }}</td>
                        <td>{{ absensi.status }}</td>
                        <td>
                            {% if absensi.bukti %}
                                <a href="{{ absensi.bukti }}" target="_blank">Lihat Bukti</a>
                            {% else %}
                                Tidak Ada Bukti
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        
            <script>
                function filterTable() {
                    var input, filter, table, tr, tdId, tdNama, i, txtValueId, txtValueNama;
                    input = document.getElementById("searchInput");
                    filter = input.value.toUpperCase();
                    table = document.getElementById("absensiTable");
                    tr = table.getElementsByTagName("tr");
        
                    for (i = 1; i < tr.length; i++) { // Start from 1 to skip the header
                        tdId = tr[i].getElementsByTagName("td")[0];
                        tdNama = tr[i].getElementsByTagName("td")[1];
                        if (tdId || tdNama) {
                            txtValueId = tdId.textContent || tdId.innerText;
                            txtValueNama = tdNama.textContent || tdNama.innerText;
                            if (txtValueId.toUpperCase().indexOf(filter) > -1 || txtValueNama.toUpperCase().indexOf(filter) > -1) {
                                tr[i].style.display = "";
                            } else {
                                tr[i].style.display = "none";
                            }
                        }       
                    }
                }
            </script>
        
        </body>

</html>
